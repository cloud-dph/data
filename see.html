// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyBROgYUR-2rakUxHbl90JlynP_X3f0GxIM",
  authDomain: "diseny-plus-hotstar-database.firebaseapp.com",
  projectId: "diseny-plus-hotstar-database",
  storageBucket: "diseny-plus-hotstar-database.firebasestorage.app",
  messagingSenderId: "582861150339",
  appId: "1:582861150339:web:0d2b69a2ae914342b723b6",
  measurementId: "G-HX223WNVKE"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Get code from URL
const params = new URLSearchParams(window.location.search);
const code = params.get('code');

if (code) {
  db.collection("movies").doc(code).get().then((doc) => {
    if (doc.exists) {
      const data = doc.data();
      document.getElementById("banner").src = data.imageUrl;
      document.getElementById("logo").src = data.logoUrl;
      document.getElementById("name").textContent = data.Name;
      document.getElementById("genres").textContent = data.genres;
      document.getElementById("tags").textContent = data.tags;
      document.getElementById("description").textContent = data.description;

      document.getElementById("watchBtn").onclick = () => {
        window.location.href = data.redirectUrl;
      };
    } else {
      alert("Movie not found.");
    }
  }).catch((error) => {
    console.error("Error fetching movie:", error);
  });
} else {
  alert("No code provided in URL.");
}
